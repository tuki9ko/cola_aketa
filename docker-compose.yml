version: "3.9"
services:
    web:
        container_name: docker_go_api
        build:
            context: ./docker
            args:
                - GO_VERSION=${GO_VERSION}
                - API_CODE_WORKDIR=${API_CODE_WORKDIR}
        volumes:
            - ${API_CODE_LOCAL_PATH}:${API_CODE_WORKDIR}
        ports:
            - ${API_PORT}:${API_PORT}
        tty: true
    postgres:
        container_name: postgres
        image: postgres:${POSTGRES_TAG}
        ports:
            - 5555:5432
        environment:
            - POSTGRES_USER=${POSTGRES_USER}
            - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
            - PGPASSWORD=${POSTGRES_PGPASSWORD}
            - POSTGRES_DB=${POSTGRES_DB_NAME}
            - TZ=${POSTGRES_TIMEZONE}
        tty: true
        restart: always
        user: root
        volumes:
            - ${POSTGRES_LOCAL_PATH}:/var/lib/postgresql/data